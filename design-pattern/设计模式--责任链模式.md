# 设计模式--责任链模式



## 说明

1. 本文章待完善，笔者看了一些责任链模式的 demo，但感觉有些纸上谈兵。关于责任链模式，先暂时写这些初步了解，从经典开源组件里学习一下再总结(例如 tomcat 的 filter 设计)，单纯看 demo 不深刻。



## 责任链模式的定义

责任链模式（Chain of Responsibility Pattern）为请求的处理准备了一个 processor 对象链。一个 processor 是接收者同时也是发送者，发送给下一个 processor。对处理请求的 processor 进行解耦。责任链模式属于行为型模式。



## 责任链模式的特点

1. 每个 processor 都持有下一个 processor 的引用，或有一个循环会遍历候选项 processor，这就形成了一个链条。
2. 链条上的每个 processor 都有机会处理请求，链条上的某个 processor 有能力选择放行或不放行给下一个 processor。

示意图:

![img](https://image-hosting.jellyfishmix.com/20221202153008.png)



## 责任链模式和策略模式的区别

1. 策略模式，应用一个策略，去 doStrategy，只会应用一个策略去 doStrategy。
2. 责任链模式，把执行流程的控制权交给你了，你有能力放行或不放行给下一个。主要做的事情，是"干预"原本的流程，链条上所有的元素，都参与干预。区别就在于"干预"。
3. 责任链模式也分带拦截的，和不带拦截的两种。带拦截的是给当前 processor 一个机会，不让后面的 processor 来做了。不带拦截的是处理后一律放过。
4. 例如 spring 中的 BeanPostProcessor 就是典型的责任链模式。
5. 实际使用中，两者命名很像，有时策略模式也叫 Processor，责任链模式也叫 Processor。