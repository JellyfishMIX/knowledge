# lombook @Builder 注解导致的反射报错



## 说明

1. @author [JellyfishMIX - github](https://github.com/JellyfishMIX) / [blog.jellyfishmix.com](http://blog.jellyfishmix.com)
2. LICENSE [GPL-2.0](https://github.com/JellyfishMIX/GPL-2.0)



## 问题背景

1. 一个交由 spring-ioc 框架管理的对象，使用 @Builder 注解后框架报错说找不到无参构造方法。给此类加上 @NoArgsConstructor 注解后就不报错了。



## 无参数构造与反射

1. java 类不显式写构造方法，会隐式提供一个无参构造方法。@Builder 编译时会显式生成全参构造方法(建造者模式决定的需要有全参构造)，导致此类失去隐式的无参构造方法。
2. 各种框架创建对象时，一般通过反射来创建，反射创建对象特点是需要使用类的无参构造方法来创建对象，如果此类没有无参构造方法会报错。
3. 使用 @Builder 注解后，如果这个对象被一些框架进行了反射操作，此对象的类需要显式声明无参构造方法，@NoArgsConstructor 注解就是用来显式声明无参构造方法的。
4. 不光各种框架创建你提供的对象时用反射，序列化组件在反序列化时，也是用反射创建对象的。反序列化时 = 左边拿到的对象，就是通过反射创建出来的，所以一个类如果涉及反序列化操作，也需要显式提供无参构造



## 框架/序列化组件用反射创建对象的原因

1. 因为框架，反序列化组件这种东西，在框架的源码里不知道你需要创建什么数据类型的对象，只能通过反射来创建。常见的 new 对象这种创建方式，需要在代码里显式指定对象的数据类型，这对框架源码是不可能做到的。