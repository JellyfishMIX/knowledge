# 四种会话追踪技术



## 四种会话追踪技术

- Cookie
- Session
- URL重写
- 隐藏表单域



## Session和Cookie

- session用来表示用户会话，session对象在服务端维护，一般tomcat设定session生命周期为30分钟，超时将失效，也可以主动设置无效。
- cookie存放在客户端，可以分为内存cookie和磁盘cookie。内存cookie在浏览器关闭后消失，磁盘cookie超时后消失。当浏览器发送请求时，将自动发送对应cookie信息，前提是请求url满足cookie路径。
- 可以将sessionId存放在cookie中，也可以通过重写url将sessionId拼接到url上。因此可以查看浏览器cookie或地址栏url看到sessionId。
- 请求到服务端时，将根据请求中的sessionId查找session，如果可以获取到则返回，否则返回null或者返回新构建的session，老的session依旧存在，请参考API。 



## URL重写

- 可以通过url参数的形式将信息发送至服务器。
- 但是这种方式参数的大小受到浏览器限制，cookie禁用时可以继续的工作，不存在持久性，一旦页面关闭则结束。
- 这种方式通过明文将信息传输，并不安全，容易被劫持。



## 隐藏表单域

表单隐藏域type=hidden的作用：

HTML中写表单的时候，写入这段代码
`<input type="hidden" name="#" value="#">`
意思是在这里增加一个隐藏域。对于用户来说，在页面上隐藏域是不可见的。

- 隐藏域的作用是帮助表单收集和发送信息，便于后端处理数据。用户点击提交数据的时候，隐藏域的信息也被一起发送到了后端。
- 后端接收前端传来的数据，需要确认前端的身份，是本公司的网页传来的数据，而不是其他黑客知道后端地址后传来的假数据。那么就加一个隐藏域，验证`value`里的值和数据库里`name`的值是不是对应的，类似于“天王盖地虎，宝塔镇河妖”，暗号对的上，才能证明是自己人。当然这些东西也能用cookie实现，但使用隐藏域比较简单，而且不会有浏览器不支持，用户禁用cookie的烦恼。
- 有时候一个表单里有多个提交按钮，后端怎么知道用户是点击哪个按钮提交过来的呢？这时候我们只要加隐藏域，对每一个按钮起个名字(value值)，后端接收到数据后，检查value值，就能知道是哪个按钮提交的了。
- 有时候一个网页中有多个form，我们知道多个form是不能同时提交的，但有时这些form确实相互作用，我们就可以在form中添加隐藏域来使它们联系起来。
- JavaScript不支持全局变量，但有时我们必须用全局变量，我们就可以把值先存在隐藏域里，它的值就不会丢失了。
- 还有个例子，比如按一个按钮弹出四个小窗口，当点击其中的一个小窗口时其他三个自动关闭．可是IE不支持小窗口相互调用，所以只有在父窗口写个隐藏域，当小窗口看到那个隐藏域的值是close时就自己关掉。



## 例题

#### 1. 

有关会话跟踪技术描述正确的是？

- A Cookie是Web服务器发送给客户端的一小段信息，客户端请求时，可以读取该信息发送到服务器端。

- B 关闭浏览器意味着临时会话ID丢失，但所有与原会话关联的会话数据仍保留在服务器上，直至会话过期。

- C 在禁用Cookie时可以使用URL重写技术跟踪会话。

- D 表单隐藏域将字段添加到HTML表单并在客户端浏览器中显示。

##### 答案

A, B, C

##### 解析

- A 参考本二级标题知识点

- B session存在服务器，但是sessionid存在客户端，作为客户端找到session的引用。

- C 可以通过重写url将sessionId拼接到url上。

- D 表单隐藏域用来收集或发送信息的不可见元素，对于网页的访问者用户来说，表单隐藏域是看不见的。当表单被提交时，表单隐藏域会将其中定义的名称和值发送到服务器上。



## 引用/参考

["牛客294719号"的回答 - 牛客](https://www.nowcoder.com/questionTerminal/ca4daaaba2a74097b7990018187436b8)

[表单隐藏域type=hidden的作用 - 辉夜乀](https://www.jianshu.com/p/5bdf753acef2)

["半纸流年-轻描了谁的夏天"的回答 - 牛客](https://www.nowcoder.com/questionTerminal/ca4daaaba2a74097b7990018187436b8)

