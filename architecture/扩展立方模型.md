# 扩展立方模型



## 介绍

可扩展性的艺术（The Art of Scalability）一书描述了一个非常有用的三维的可伸缩模型：伸缩立方

![img](https://image-hosting.jellyfishmix.com/20200622173704.png)



### X轴缩放

X轴缩放由在负载均衡器后运行应用的多个副本组成。如果有N个副本，则每个副本处理1 / N的负载。这是一个简单，常用的缩放应用程序的方法。

这种方法的一个缺点是，因为每个副本都潜在地访问所有数据，所以缓存需要更多的内存资源才能有效。这种方法的另一个问题是它不解决增加开发和应用程序复杂性的问题。



### Y轴缩放

与X轴和Z轴不同，X轴和Z轴由运行应用程序的多个相同副本组成，Y轴轴缩放将应用程序分为多个不同的服务。每个服务负责一个或多个相关联的功能。有两种不同的方式将应用程序分解为服务。一种方法是使用基于动词的分解和定义实现单个用例（例如检出）的服务。另一个选项是通过名词分解应用程序，并创建负责与特定实体相关的所有操作（例如客户管理）的服务。应用程序可能使用基于动词和基于名词的分解的组合。



### Z轴缩放

#### 介绍

当使用Z轴缩放时，每个服务器运行相同的代码副本。在这方面，它类似于X轴缩放。最大的区别是每个服务器只负责数据的一个子集。系统的某些组件负责将每个请求路由到适当的服务器。一种常用的路由标准是请求的属性，例如正被访问的实体的主键。另一个常见的路由标准是自定义类型。例如，应用可以通过将其请求路由到具有更多容量的不同的服务器集合来向付费客户提供比免费客户更高的SLA。

Z轴分割通常用于缩放数据库。基于每个记录的属性，跨一组服务器对数据进行分区（也称为分片）。在本示例中，RESTAURANT表的主键用于在两个不同的数据库服务器之间划分行。请注意，可以通过将一个或多个服务器部署为副本/从属，将X轴克隆应用于每个分区。 Z轴缩放也可应用于应用。在此示例中，搜索服务由多个分区组成。路由器将每个内容项目发送到适当的分区，在那里它被索引和存储。查询聚合器将每个查询发送到所有分区，并合并每个分区的结果。

#### Z轴缩放的好处

- 每个服务器仅处理数据的子集。

- 这提高了缓存利用率，并减少了内存使用和I / O流量。

- 还提高了事务可扩展性，因为请求通常分布在多个服务器上。

- 此外，Z轴缩放改善了故障隔离，因为故障仅使部分数据可访问。

#### Z轴缩放的缺点

- 增加了应用复杂性。

- 我们需要实现一个分区方案，这可能是棘手的，特别是如果我们需要重新分区数据。

- 不能解决增加开发和应用复杂性的问题。为了解决这些问题，我们需要应用Y轴缩放。



## 引用

[规模立方（The Scale Cube） - zonebond的文章 - 知乎 ](https://zhuanlan.zhihu.com/p/23837664)