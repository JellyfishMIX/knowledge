# 应用实例与数据库负载分配



![img](https://image-hosting.jellyfishmix.com/20201111120105.jpg)

这张图是一个最常见的中型网络服务的架构示意图。

每一个应用服务器，跑着一个应用程序实例（应用程序就是咱们写的后端代码）。前面有负载均衡负责把流量分流给应用实例们。

从这张图能看出，应用实例理想情况下，是可以无限扩展的（就是可以起很多个实例）。

但是数据库使用主从库结构（主库写，从库读），理想情况下负责读的库可以有很多台，但负责写的数据库只有一台（这是出于事务管理的考虑）。

所以优化的通常思路是，尽量让更多的负载位于应用实例上，而不是位于数据库上。原因就像前面提到的，理想情况下，应用实例可以起很多个，但是写数据库只有一台。

当把负载逻辑更多地分配给应用层后，主数据库服务器（写） 上的负载有了显著的降低：

![2541605066477_.pic](https://image-hosting.jellyfishmix.com/20201111115828.jpg)

但是应用服务器的负载提升了，这时候怎么办呢？只要再加几台应用服务器就好了。



## 引用/参考

[大家设计数据库时使用外键吗？ - 林灿斌的回答 - 知乎](https://www.zhihu.com/question/19600081/answer/94706401)